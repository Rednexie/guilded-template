"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ReactionEventHandler = void 0;
const constants_1 = require("../../constants");
const structures_1 = require("../../structures");
const util_1 = require("../../util");
const GatewayEventHandler_1 = require("./GatewayEventHandler");
class ReactionEventHandler extends GatewayEventHandler_1.GatewayEventHandler {
    messageReactionCreated(data) {
        const { d: { reaction, serverId }, } = data;
        const newReaction = new structures_1.MessageReaction(this.client, Object.assign(Object.assign({}, reaction), { serverId }));
        if (this.client.reactions.shouldCacheReaction)
            this.client.reactions.cache.set((0, util_1.buildMessageReactionKey)(reaction.messageId, reaction.createdBy, reaction.emote.id), newReaction);
        return this.client.emit(constants_1.constants.clientEvents.MESSAGE_REACTION_CREATED, newReaction);
    }
    messageReactionDeleted(data) {
        const { d: { reaction, serverId }, } = data;
        if (this.client.reactions.shouldCacheReaction)
            this.client.reactions.cache.delete((0, util_1.buildMessageReactionKey)(reaction.messageId, reaction.createdBy, reaction.emote.id));
        return this.client.emit(constants_1.constants.clientEvents.MESSAGE_REACTION_DELETED, Object.assign(Object.assign({}, reaction), { serverId }));
    }
}
exports.ReactionEventHandler = ReactionEventHandler;
//# sourceMappingURL=ReactionEventHandler.js.map